# <center><span id="同盾">同盾</span></center>


## 1. 接口地址
 > /api/danger/get_data

## 2. 请求参数
| 参数名 | 类型 | 说明 | 是否必需 | 备注 |
| --| -- | -- | -- | -- |
| name | string | 姓名 | Y |  |
| mobile | string | 手机号 | Y |  |
| id_card | string | 身份证号码 | Y |  |
| type | string | 数据类型 | tongdun |  多个值可以用`,`分隔 |
| platform | string | 系统类型 | N | IOS/ANDROID默认ANDROID |

## 3. 响应参数
| 参数名 | 类型 | 说明 | 备注 |
| -- | -- | -- | -- |
| status | int | 状态码 | 200为请求成功后，其他为请求失败 |
| message | string | 状态描述 | 状态码为200时为空 |
| tongdun | json | 同盾数据 |  ||

**同盾数据(tongdun)**

| 参数名 | 类型 | 说明 | 备注 |
| -- | -- | -- | -- |
| final_score | int | 最终的风险系数。权重模式下是策略中所有命中规则分数相加，首次匹配和最坏匹配时则由其中一条规则决定，最后取策略集下所有策略中分数最高的作为最终风险系数，该系数越高说明风险越大。|   |
| policy`_`set`_`name   | String | 触发的策略集名称 | |
| risk_type | String | 命中的风险类型_评估结果 | |
| final_decision | String | 风险评估结果, Accept无风险，通过；Review低风险，审查；Reject高风险，拒绝 | |
| policy_set | json | 包含每个策略以及策略的命中规则详见后面policy_set字段，为JSON Array格式 | |
| spend_time | int | 调用api耗时毫秒数 | |
| policy_name | String | 触发的策略名称 | |
| seq_id | String | 这条事件的sequence id | |
| hit_rules|json | 命中的规则列表| |


**包含每个策略以及策略的命中规则详见后面policy_set字段(policy_set)**

| 参数名 | 类型 | 说明 | 备注 |
| -- | -- | -- | -- |
| policy_uuid     | String | 策略uuid |  |
| policy_name     | String | 触发的策略集名称 |  |
| policy_score    | String | 该条策略的风险分数，只有在权重模式下有效  |  |
| policy_mode     | String | 该条策略的策略模式，FirstMatch/WorstMatch/Weighted |  |
| risk_type       | String | 策略风险类型|  |
| policy_decision | String | 该条策略的决策结果，Accept/Review/Reject |  |
| policy_name     | String | 策略名称 |  |
| hit_rules       | json   | 命中的规则列表 |  |
 

**命中的规则列表(hit_rules)**
| 参数名 | 类型 | 说明 | 备注 |
| -- | -- | -- | -- |
| score      | String | 该条规则的风险分数，只有在权重模式下有效 |  |
| decision   | String | 该条规则的决策结果，Accept/Review/Reject |  |
| name       | String | 该条策略的风险分数，只有在权重模式下有效   | |
| id         | String | 规则名称 |  |
| uuid       | String | 规则唯一编码 | |
| parentUuid | String | 该规则的父规则uuid |  |

## 4. 响应示例
* 正常响应示例 
```json
{
    "status": 200,
    "message": "OK",
    "data": {
        "final_score": 82,
        "policy_set_name": "借款事件_ios",
        "risk_type": "suspiciousLoan_reject",
        "final_decision": "Reject",
        "policy_set": [
            {
                "policy_score": 82,
                "policy_mode": "Weighted",
                "risk_type": "suspiciousLoan",
                "policy_decision": "Reject",
                "policy_name": "异常借款_ios",
                "policy_uuid": "6ecdc9a76cf845aba665e77bb5db6327",
                "hit_rules": [
                    {
                        "score": 0,
                        "decision": "Accept",
                        "name": "7天平台1",
                        "id": "10752377",
                        "uuid": "82dc0f8f638247e9af7a88972c523724",
                        "parentUuid": ""
                    },
                    {
                        "score": 0,
                        "decision": "Accept",
                        "name": "7天平台2",
                        "id": "10752387",
                        "uuid": "fa8ef471bed740679bc859e1f7f96aa0",
                        "parentUuid": ""
                    }
                ]
            }
        ],
        "spend_time": 49,
        "policy_name": "借款事件_ios",
        "seq_id": "1537943318232199S180F20D47044269",
        "hit_rules": [
            {
                "score": 0,
                "decision": "Accept",
                "name": "7天平台1",
                "id": "10752377",
                "uuid": "82dc0f8f638247e9af7a88972c523724",
                "parentUuid": ""
            },
            {
                "score": 0,
                "decision": "Accept",
                "name": "7天平台2",
                "id": "10752387",
                "uuid": "fa8ef471bed740679bc859e1f7f96aa0",
                "parentUuid": ""
            }
        ]
    }
}
```
