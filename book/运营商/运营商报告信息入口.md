# <center><span id="运营商报告">运营商报告</span></center>


## 1. 接口地址
 > /api/yys/report

## 2. 请求参数
| 参数名 | 类型 | 说明 | 是否必需 | 备注 |
| --| -- | -- | -- | -- |
| user_id    | string | 调用方生成的用户ID                 | Y |长度最大为64位）  |
| id_card    | string | 身份证号                                              		     | Y |  |
| name       | string | 姓名 						     | Y | 需要 UrlEncode |
| mobile     | string | 手机号 						 | Y |  |
| notify_url | string | 服务器异步通知页面路径 （长度最大为128位）     | Y | 需要 UrlEncode |
| return_url | string | 页面跳转同步通知页面路径 （长度最大为512位）| Y | returnUrl不传，会出现认证链接失效问题 ,需要 UrlEncode  |
| contacts   | json   | 紧急联系人 						 | N | 需要 UrlEncode，最多传五个紧急联系人|

**contacts格式**

| 参数名 | 类型 | 说明 | 是否必需 | 备注 |
| --| -- | -- | -- | -- |
| name      | string | 紧急联系人姓名                 | Y |  |
| mobile    | string | 紧急联系人手机号              | Y |  ||

**回调state字段释义**

| 参数名 |  说明 | 
| -- |  -- |
| init | 初始化 |  
| login   | 登录成功 |  
| crawl | 抓取成功 |  
| crawl_fail | 抓取失败 | 
| report | 生成报告成功 |  
| report_fail | 生成报告失败 | 


**认证成功跳转returnUrl的传给商户的参数(GET)**

| 参数名 | 类型 | 必须 | 备注 |
| -- | -- | -- | -- |
| userId     | String | 是 | 传入的userId，传入为空时返回系统自动生成userId |
| outUniqueId     | String | 是  | 调用方生成的会话唯一标识id|
| state    | String | 是   |请求状态  |
 

**后台回调notifyUrl传给商户的参数(POST)**

`注：登录成功以后才会有回调；在登录成功，抓取和报告部分都会进行回调`

| 参数名 | 类型 | 必须 | 备注 |
| -- | -- | -- | -- |
| detail_data     | json | 是 | 报告详情 |
| report_data     | json | 是  | 报告|

## 3. 请求示例
```json
{
  "app_id":"abc",
  "sign":"",
  "biz_data":{
  	"user_id":"123456789",
    "id_card":"123213213282767",
    "name":"%e5%8d%a2%e6%b7%91%e6%a2%85",
    "mobile":"13599648818",
    "notify_url":"http%253a%252f%252flocalhost%253a8080%252freoprt",
    "return_url":"http%253a%252f%252flocalhost%253a8080%252freoprt",
    "contacts":"%5b%7b%22name%22%3a%22%e5%bc%a0%e4%b8%89%22%2c%22mobile%22%3a%221300000000%22%7d%2c%7b%22name%22%3a%22%e6%9d%8e%e5%9b%9b%22%2c%22mobile%22%3a%221300000001%22%7d%5d"
  },
  "sign_type":"RSA",
  "timestamp":"1234567890"
}
```
## 4. 响应示例
* 正常响应示例 
```json
{
    "status": 200,
    "message": "OK",
    "data": {
        "yys": {
            "url": "https://tianji.rong360.com/tianjiwapreport/login?data=nD%2BRaNTUBXKJrM1QPpIetH%2B7GoC9yFcQEknPlzm947sVs9a6qC0bWf2kZ6dF5VdCAeR%2BSuteujEjYwqmBG11FxxTrPuK%2BnDwp6AnPSLdUku%2Fk8vepdTdHCuwzbuKDUesxKAj%2F16yymsJ%2BzdJt2JU%2Bf7JsM%2FZ2OqVRTALFr5lwCSQMKHPFx%2B%2FUtxdIVpjVswDoZw%2FWkP6NxQc9m3ahMDb79mzSUdr6Jh89KmLaZqdGkv2CylDbkw1ta735LZq%2BDd1"
        }
    },
    "timestamp": 1538018049132,
    "sign_type": "RSA"
}
```
