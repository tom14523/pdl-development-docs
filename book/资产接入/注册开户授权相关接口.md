# 注册开户授权相关接口

## 用户注册接口

### 用户注册接口说明

通过此接口完成海投汇注册

### 用户注册接口方式

> HTTP接口调用, 方式: POST

### 用户注册接口路径

> /openapi/user/register

### 用户注册接口请求参数

| 字段名 | 字段描述 | 类型 | 最大长度 | 必填 | 备注 |
| -------- | -------- | -------- | -------- | -------- | -------- |
| mobile | 手机号 | 字符串 | 11 | 必填 | |
| password | 密码 | 字符串 | 16 | 必填 | |
| third_party_user_id | 商户用户id | 字符串 | 50 | 必填 | 商户用户id，全局唯一 |

### 用户注册接口响应参数

| 字段名 | 字段描述 | 类型 | 最大长度 | 必填 | 备注 |
| -------- | -------- | -------- | -------- | -------- | -------- |
| htouhui_user_id | 海投汇用户id | 字符串 | 11 | 必填 | 注册成功时返回 |
| third_party_user_id | 商户用户id | 字符串 | 50 | 必填 | |

### 错误码

| 错误码 | 说明 |
| ----- | ---- |
| 50002 | 用户已存在 |

## 开户/设置交易密码/授权接口

### 开户/设置交易密码/授权接口时序图

### 开户/设置交易密码/授权接口功能说明

通过此接口完成江西银行开户、设置交易密码、缴费授权。此接口按开户、设置交易密码、缴费授权依次完成，如果某一步失败则不再继续后续操作，请根据type类型重新请求，继续引导用户完成后续流程。type默认为0。

### 开户/设置交易密码/授权接口调用方式

> 页面调用

### 开户/设置交易密码/授权接口请求地址

> openapi/user/openAccount

### 开户/设置交易密码/授权接口请求参数

| 字段名 | 字段描述 | 类型 | 最大长度 | 必填 | 备注 |
| -------- | -------- | -------- | -------- | -------- | -------- |
| htouhui_user_id | 海投汇用户id | 字符串 | 11 | 必填 | |
| id_card | 身份证号 | 字符串 | 18 | 必填 | |
| real_name | 真实姓名 | 字符串 | 60 | type=0或type=1时必填 | |
| type | 业务类型 | 字符串 | 1 | 必填| 0：开户；1：设置交易密码，2：缴费授权 |
| third_party_user_id | 商户用户id   | 字符串 | 50 | 必填 | 商户用户id，全局唯一 |
| notify_url | 通知接口地址 | 字符串 | 200 | 必填 | 结果通知会POST到此URL |
| return_url | 返回页面链接 | 字符串 | 256 | 必填 | GET方式跳转，其中返回的参数参见下面的文档 |

### 开户/设置交易密码/授权接口响应参数

响应参数会拼接在第三方提供的return_url后面返回给第三方

| 字段名 | 字段描述 | 类型 | 最大长度 | 必填 | 备注 |
| -------- | -------- | -------- | -------- | -------- | -------- |
| htouhui_user_id | 海投汇用户id | 字符串 | 11 | 必填 |  |
| third_party_user_id | 商户用户id | 字符串 | 50 | 必填 |  |
| status | 开户设置交易密码及授权状态 | 字符串 | 1 | 必填 | 0:开户失败;1：开户成功；2：开户及设置交易密码成功；3：开户设置交易密码及授权都成功 |

## 开户/设置交易密码/授权通知接口

### 开户/设置交易密码/授权通知接口功能说明

用户在海投汇引导下完成江西银行开户、设置交易密码、缴费授权等操作后。该接口会异步通知合作方用户状态，以异步通知为准，如果失败则需要用户重新发起开户/设置交易密码/授权请求。

### 开户/设置交易密码/授权通知接口调用方式

海投汇发送POST请求到notify_url

### 开户/设置交易密码/授权通知接口请求参数

| 字段名 | 字段描述 | 类型 | 最大长度 | 必填 | 备注 |
| -------- | -------- | -------- | -------- | -------- | -------- |
| htouhui_user_id | 海投汇用户id | 字符串 | 11 | 必填 |  |
| third_party_user_id | 商户用户id | 字符串 | 50 | 必填 | |
| status | 开户设置交易密码及授权状态 | 整型 | 1 | 必填 | 0:开户失败;1：开户成功；2：开户及设置交易密码成功；3：开户设置交易密码及授权都成功 |
| bank_card_number | 开户绑定的银行卡号 | 字符串 | 30 | 开户成功后会返回此字段 | |

## 用户信息查询接口

### 用户信息查询接口功能说明

通过用户信息查询接口确定用户在海投汇注册、开户、设置交易密码、缴费授权是否全部成功，如果全部成功则可进行债权对接。

### 用户信息查询接口调用方式

> HTTP接口调用, 方式: GET

### 用户信息查询接口请求地址

> openapi/user/query

### 用户信息查询接口请求参数

| 字段名 | 字段描述 | 类型 | 最大长度 | 必填 | 备注 |
| -------- | -------- | -------- | -------- | -------- | -------- |
| id_card | 身份证号 | 字符串 | 18 | 必填 | |
| third_party_user_id | 商户用户id | 字符串 | 50 | 必填 | 商户用户id，全局唯一 |

### 用户信息查询接口响应参数

| 字段名 | 字段描述 | 类型 | 最大长度 | 必填 | 备注 |
| -------- | -------- | -------- | -------- | -------- | -------- |
| htouhui_user_id | 海投汇用户id | 字符串 | 11 | 商户用户注册成功则返回该字段 | |
| third_party_user_id | 商户用户id | 字符串 | 50 | 必填 | |
| status | 开户设置交易密码及授权状态 | 整型 | 1 | 必填 | 0:开户失败;1：开户成功；2：开户及设置交易密码成功；3：开户设置交易密码及授权都成功 |
| is_borrower | 是否是借款人 | 整型 | 1 | 必填 | 是：1，否：0 |
| bank_card_number | 开户绑定的银行卡号 | 字符串 | 30 | 开户成功后会返回此字段 | |