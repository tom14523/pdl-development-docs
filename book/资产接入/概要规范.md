# 概要规范

## 基本约定

报文在传输时采用UTF8编码。报文采用JSON格式。

## 接口类型说明

提供两种类型的接口：API接口和页面类型接口，API接口数据以JSON格式提交，页面类型接口数据以FORM表单方式提交。

## 签名方式

每个接口的请求和响应都需要对数据进行签名操作。两种类型的接口均需要对所有参数的名称和值进行拼接，拼接顺序为参数名称升序，拼接连接符为“&”。拼接的最后需要加上海投汇为第三方生成的密钥字符串。消息摘要算法统一使用SHA1算法。

* 例如：参数a=1,b=2,c=3，拼接后为a=1&b=2&c=3&secrectKey

## 通用字段

| 字段名 | 字段描述 | 类型 | 最大长度 | 必填 | 备注 |
| -------- | -------- | -------- | -------- | -------- | -------- |
| version | 接口版本号 | 字符串 | 5| 是 | 目前为1.0 |
| inst_code | 机构代码| 字符串 | 8 | 是 | 闪银:shanyin |
| timestamp | 时间戳 | 字符串 | 8 | 是 | |
| sign | 签名 | 字符串 | | 是 | 对所有参数的SHA1摘要 |

## 接口URL

* 测试：https://new-uat.test.htouhui.com/
* 预发：https://stage.htouhui.com/
* 生产：https://www.htouhui.com/

## 异步通知规则

海投汇会在后台业务逻辑处理完成之后异步通知第三方的notify_url，第三方需要在成功处理之后在响应中返回success字符串，否则海投汇会在5秒后发起第二次请求，直到重试三次结束。